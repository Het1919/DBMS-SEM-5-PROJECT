CREATE DATABASE DBMS;
SHOW DATABASES;
USE DBMS;

CREATE TABLE JOBSEEKER (
	JOBSEEKER_ID INT PRIMARY KEY,
    FIRST_NAME CHAR(25)  NOT NULL ,
    MIDDLE_NAME CHAR(25)  NOT NULL ,
    LAST_NAME CHAR(25)  NOT NULL ,
    CONTACT NUMERIC(10) ,
    ALTERNATE_CONTACT NUMERIC(10) ,
    GENDER CHAR(2),
    REG_DATE DATE,
    EMAIL VARCHAR(255),
    PASS_WORD VARCHAR(255),
    DOB DATE
);

CREATE TABLE COMPANY (
    COMPANY_ID INT PRIMARY KEY,
    COMPANY_NAME VARCHAR(255),
    DESCRIP VARCHAR(255),
    URL VARCHAR(255)
);

CREATE TABLE RECRUITER (
    RECRUITER_ID INT PRIMARY KEY,
    COMPANY_ID INT,
    FIRST_NAME CHAR(25)  NOT NULL ,
    MIDDLE_NAME CHAR(25)  NOT NULL ,
    LAST_NAME CHAR(25)  NOT NULL ,
    CONTACT NUMERIC(10) ,
    ALTERNATE_CONTACT NUMERIC(10) ,
    REG_DATE DATE,
    EMAIL VARCHAR(255),
    PASS_WORD VARCHAR(255),
    FOREIGN KEY (COMPANY_ID) 
          REFERENCES COMPANY(COMPANY_ID)
          ON DELETE CASCADE
);

CREATE TABLE EDUCATION (
    JOBSEEKER_ID INT,
    UNIVERSITY_NAME VARCHAR(255),
    START_YEAR NUMERIC(4) CHECK( START_YEAR>=1920 ),
    END_YEAR NUMERIC(4) CHECK(END_YEAR>=1920),
    MAJOR_COURSE VARCHAR(255),
    DEGREE VARCHAR(255),
    FOREIGN KEY(JOBSEEKER_ID)
         REFERENCES JOBSEEKER(JOBSEEKER_ID)
         ON DELETE CASCADE
);

CREATE TABLE EXPERIENCE (
    JOBSEEKER_ID INT,
    DESCRIP VARCHAR(255),
    C_NAME VARCHAR(255),
    JOB_TITLE VARCHAR(100),
    START_DATE DATE,
    END_DATE DATE,
    FOREIGN KEY(JOBSEEKER_ID) 
        REFERENCES JOBSEEKER(JOBSEEKER_ID)
        ON DELETE CASCADE
);

CREATE TABLE SKILLSET (
    SKILLSET_ID INT PRIMARY KEY,
    SKILL_NAME VARCHAR(100)
);

CREATE TABLE JOBSEEKER_SKILL (
    SKILLSET_ID INT,
    JOBSEEKER_ID INT,
    SKILL_LEVEL INT,
	CHECK(SKILL_LEVEL>=0 AND SKILL_LEVEL<=5),
    FOREIGN KEY(SKILLSET_ID)
        REFERENCES SKILLSET(SKILLSET_ID),
	FOREIGN KEY(JOBSEEKER_ID)
        REFERENCES JOBSEEKER(JOBSEEKER_ID)
);


CREATE TABLE JOBTYPE (
   TYPE_ID INT PRIMARY KEY,
   JOB_TYPE VARCHAR(255)
);

CREATE TABLE JOBLOCATION (
    LOCATION_ID INT PRIMARY KEY,
    STREET_NAME VARCHAR(255),
    CITY VARCHAR(20),
    STATE VARCHAR(20),
    PINCODE NUMERIC(6)
);

CREATE TABLE JOB (
   JOB_ID INT PRIMARY KEY,
   COMPANY_ID INT,
   TYPE_ID INT,
   LOCATION_ID INT,
   DESCRIP VARCHAR(255),
   IS_ACTIVE BOOLEAN,
   FOREIGN KEY(COMPANY_ID)
       REFERENCES COMPANY(COMPANY_ID),
	FOREIGN KEY(TYPE_ID)
       REFERENCES JOBTYPE(TYPE_ID),
	FOREIGN KEY(LOCATION_ID)
       REFERENCES JOBLOCATION(LOCATION_ID)
);

CREATE TABLE JOBREQSKILL (
    SKILLSET_ID INT,
    JOB_ID INT,
    FOREIGN KEY(JOB_ID)
        REFERENCES JOB(JOB_ID),
	FOREIGN KEY(SKILLSET_ID)
        REFERENCES SKILLSET(SKILLSET_ID)
);

CREATE TABLE APPLY (
    JOBSEEKER_ID INT ,
    JOB_ID INT,
    APPLY_DATE DATE,
    FOREIGN KEY(JOBSEEKER_ID) 
        REFERENCES JOBSEEKER(JOBSEEKER_ID),
	FOREIGN KEY(JOB_ID)
        REFERENCES JOB(JOB_ID)
);

CREATE TABLE POST (
    JOB_ID INT PRIMARY KEY,
    RECRUITER_ID INT,
    POST_DATE DATE,
    FOREIGN KEY(JOB_ID)
        REFERENCES JOB(JOB_ID),
	FOREIGN KEY(RECRUITER_ID)
        REFERENCES RECRUITER(RECRUITER_ID)
);

CREATE TABLE RESPONSE (
    JOBSEEKER_ID INT,
    JOB_ID INT,
    RECRUITER_ID INT,
    IS_SELECTED BOOLEAN,
    FOREIGN KEY(JOBSEEKER_ID) 
        REFERENCES JOBSEEKER(JOBSEEKER_ID),
	FOREIGN KEY(JOB_ID)
        REFERENCES JOB(JOB_ID),
	FOREIGN KEY(RECRUITER_ID)
        REFERENCES RECRUITER(RECRUITER_ID)
);